# =============================================================================
# NanoBanana K-6 AI Learning Platform - Backend Environment Variables
# =============================================================================
# Copy this file to .env and fill in your values

# -----------------------------------------------------------------------------
# Server Configuration
# -----------------------------------------------------------------------------
NODE_ENV=development
PORT=3000

# Frontend URL (for CORS)
FRONTEND_URL=http://localhost:5173

# CORS - Comma-separated list of allowed origins
ALLOWED_ORIGINS=http://localhost:5173,http://localhost:3000

# -----------------------------------------------------------------------------
# Database (PostgreSQL) - REQUIRED
# -----------------------------------------------------------------------------
# Railway provides this automatically, or use your own PostgreSQL
DATABASE_URL=postgresql://user:password@localhost:5432/nanobanana

# -----------------------------------------------------------------------------
# Redis (for sessions, caching, job queues) - REQUIRED
# -----------------------------------------------------------------------------
# Railway provides this automatically, or use your own Redis
REDIS_URL=redis://localhost:6379

# -----------------------------------------------------------------------------
# Session & Authentication - REQUIRED
# -----------------------------------------------------------------------------
# Generate a strong random string (at least 32 characters)
SESSION_SECRET=your_random_session_secret_at_least_32_characters_long

# Optional: separate JWT secret (defaults to SESSION_SECRET if not set)
JWT_SECRET=your_jwt_secret_at_least_32_characters_long

# -----------------------------------------------------------------------------
# Cloudflare R2 Storage Configuration - REQUIRED for file uploads
# -----------------------------------------------------------------------------

# Cloudflare Account ID (from your dashboard URL or API)
CLOUDFLARE_ACCOUNT_ID=your_account_id

# R2 Endpoint (format: https://{account_id}.r2.cloudflarestorage.com)
R2_ENDPOINT=https://your_account_id.r2.cloudflarestorage.com

# R2 API Credentials (create in Cloudflare Dashboard → R2 → Manage R2 API Tokens)
CLOUDFLARE_R2_ACCESS_KEY_ID=your_access_key_id
CLOUDFLARE_R2_SECRET_ACCESS_KEY=your_secret_access_key

# R2 Bucket Names (create these in Cloudflare Dashboard)
R2_BUCKET_UPLOADS=orbitlearn-uploads
R2_BUCKET_AI_CONTENT=orbitlearn-ai-content
R2_BUCKET_STATIC=orbitlearn-static

# CDN Base URL (configure custom domain in Cloudflare R2 bucket settings)
# Use R2.dev URL for development, custom domain for production
CDN_BASE_URL=https://pub-your_account_id.r2.dev

# -----------------------------------------------------------------------------
# Upload Configuration (COPPA-compliant, child-safe)
# -----------------------------------------------------------------------------
MAX_UPLOAD_SIZE_MB=10
ALLOWED_UPLOAD_TYPES=application/pdf,image/png,image/jpeg,image/webp

# Presigned URL Expiry (in seconds)
PRESIGNED_URL_EXPIRY_UPLOAD=300
PRESIGNED_URL_EXPIRY_DOWNLOAD=3600

# -----------------------------------------------------------------------------
# AI Services - REQUIRED for AI features
# -----------------------------------------------------------------------------

# Google Gemini API Key
# Get from: https://aistudio.google.com/app/apikey
GEMINI_API_KEY=AIzaSy_your_gemini_api_key_here

# -----------------------------------------------------------------------------
# Firebase Admin SDK (for Google OAuth) - Optional
# -----------------------------------------------------------------------------
FIREBASE_PROJECT_ID=your-firebase-project-id
# Base64 encoded service account JSON
FIREBASE_SERVICE_ACCOUNT_JSON=base64_encoded_service_account_json

# -----------------------------------------------------------------------------
# Email Service (Resend) - Optional for now
# -----------------------------------------------------------------------------
RESEND_API_KEY=re_your_resend_api_key_here
RESEND_FROM_EMAIL=support@orbitlearn.app

# Skip email sending in development
SKIP_EMAILS=true

# -----------------------------------------------------------------------------
# Stripe (Payment Processing) - Optional for now
# -----------------------------------------------------------------------------
STRIPE_SECRET_KEY=sk_test_your_stripe_secret_key_here
STRIPE_WEBHOOK_SECRET=whsec_your_webhook_secret_here

# -----------------------------------------------------------------------------
# Logging & Monitoring
# -----------------------------------------------------------------------------
LOG_LEVEL=info

# Enable debug logging (verbose output)
DEBUG=false

# =============================================================================
# Railway-Specific Notes:
# =============================================================================
# When deploying to Railway:
# 1. DATABASE_URL and REDIS_URL are provided automatically by Railway plugins
# 2. Set PORT to $PORT in Railway (or leave unset, Railway handles it)
# 3. All other secrets should be set in Railway's environment variables
# 4. NODE_ENV will automatically be 'production' on Railway
