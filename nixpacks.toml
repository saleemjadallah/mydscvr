[phases.setup]
# Native dependencies for canvas, sharp, and pdf processing
nixPkgs = [
  "pkg-config",
  "cairo",
  "pango",
  "libpng",
  "libjpeg",
  "giflib",
  "librsvg",
  "libuuid",
  "python3",
  "pixman"
]

[phases.install]
cmds = ["cd backend && npm ci"]

[phases.build]
cmds = ["cd backend && npm run build"]

[phases.start]
cmd = "cd backend && npm run db:push && npm start"
